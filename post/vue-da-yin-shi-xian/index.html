<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>vue打印实现 | hviker</title>
<meta name="description" content="心游于艺，道不远人。" />
<link rel="shortcut icon" href="https://hviker.github.io/favicon.ico">
<link rel="stylesheet" href="https://hviker.github.io/styles/main.css">

<script src="https://hviker.github.io/media/js/jquery.min.js"></script>
<script src="https://hviker.github.io/media/js/masonry.pkgd.min.js"></script>
<script src="https://hviker.github.io/media/js/aos.js"></script>
<script src="https://hviker.github.io/media/js/pace.min.js"></script>
<script src="https://hviker.github.io/media/js/view-image.min.js"></script>
<script src="https://hviker.github.io/media/js/jquery.magnific-popup.min.js"></script>
<script src="https://hviker.github.io/media/js/functions.js"></script>
    <meta name="referrer" content="never">
    <meta name="description" content="// 打印类属性、方法定义
/* eslint-disable */
const Print = function (dom, options) {
  if (!(this instanceof Print)) return new Pr..." />
    <meta name="keywords" content="" />
    <script src="https://hviker.github.io/media/js/waterfall.min.js"></script>
    <script src="https://hviker.github.io/media/js/prism.min.js"></script>
  </head>
  <body>
            <header id="header" class="grid-container">
        <!-- start: .menu-wrapper -->
        <div class="menu-mobile"> 
          <i class="fa fa-reorder"></i>
        </div>
        <div class="menu-wrapper">
          <div class="">
            <div class="logo">
              <a href="https://hviker.github.io"><img src="/media/images/custom-headerLogo.png" alt=""></a>
            </div>
            <!-- start: .main-nav -->

            <nav class="main-nav grid-container grid-parent">
              <ul id="menu-header" class="menu gradient-effect">
                <li class=""><a href="https://hviker.github.io" class="menu">首页</a></li>
                
                  <li class="" >
                    <a href="/" class="menu">
                       
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/archives" class="menu">
                      归档
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/tags" class="menu">
                      标签
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/post/about" class="menu">
                      关于
                    </a>
                  </li>
                
                <li class="search-menu-item hide-on-mobile hide-on-tablet"><a href="#search-lightbox" class="lightbox mfp-inline"><i class="fa fa-search-line"></i></a></li>
              </ul>
            </nav>
            <a href="#search-lightbox" class="lightbox epcl-search-button mfp-inline hide-on-tablet hide-on-desktop"><i class="fa fa-search-line"></i></a>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
          </div>    
          <div class="clear"></div>
        </div>
        <!-- end: .menu-wrapper -->
        <div class="clear"></div>
      </header>
      <div class="hide-on-mobile hide-on-tablet hide-on-desktop">
        <div id="search-lightbox" class="grid-container grid-small grid-parent mfp-hide">
          <div class="search-wrapper section">
            <form id="gridea-search-form" data-update="1627294486891" action="/search/index.html" class="search-form" _lpchecked="1">
              <input type="text" name="q" id="s" value="" class="search-field" placeholder="搜点啥..." aria-label="搜点啥..." required="">
              <button type="submit" class="submit" aria-label="Submit">
                <i class="fa fa-search-line"></i>
              </button>
            </form>
          </div>
        </div>
      </div>

      <main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

        <div class="center content">
          <div class="featured-image cover" style="background-image: url('https://hviker.github.io/post-images/vue-da-yin-shi-xian.jpg');">
            <div class="meta top"> 
              <time class="meta-info" style="float:left;" datetime="2020-08-20"><i class="fa fa-calendar"></i><span class="lately">1 年前</span></time>
              
            </div>
            <div class="info">
              <div class="tags ">
                
              </div>
              <h1 class="title ularge white bold">vue打印实现</h1>
            </div>
          </div>
        </div>  

        <div class="epcl-page-wrapper">
          <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
              <section class="post-content">
                <div class="text">
                  <pre><code>// 打印类属性、方法定义
/* eslint-disable */
const Print = function (dom, options) {
  if (!(this instanceof Print)) return new Print(dom, options);

  this.options = this.extend({
    'noPrint': '.no-print'
  }, options);

  if ((typeof dom) === &quot;string&quot;) {
    this.dom = document.querySelector(dom);
  } else {
    this.isDOM(dom)
    this.dom = this.isDOM(dom) ? dom : dom.$el;
  }

  this.init();
};
Print.prototype = {
  init: function () {
    var content = this.getStyle() + this.getHtml();
    this.writeIframe(content);
  },
  extend: function (obj, obj2) {
    for (var k in obj2) {
      obj[k] = obj2[k];
    }
    return obj;
  },

  getStyle: function () {
    var str = &quot;&quot;,
      styles = document.querySelectorAll('style,link');
    for (var i = 0; i &lt; styles.length; i++) {
      str += styles[i].outerHTML;
    }
    str += &quot;&lt;style&gt;&quot; + (this.options.noPrint ? this.options.noPrint : '.no-print') + &quot;{display:none;}&lt;/style&gt;&quot;;

    return str;
  },

  getHtml: function () {
    var inputs = document.querySelectorAll('input');
    var textareas = document.querySelectorAll('textarea');
    var selects = document.querySelectorAll('select');

    for (var k = 0; k &lt; inputs.length; k++) {
      if (inputs[k].type == &quot;checkbox&quot; || inputs[k].type == &quot;radio&quot;) {
        if (inputs[k].checked == true) {
          inputs[k].setAttribute('checked', &quot;checked&quot;)
        } else {
          inputs[k].removeAttribute('checked')
        }
      } else if (inputs[k].type == &quot;text&quot;) {
        inputs[k].setAttribute('value', inputs[k].value)
      } else {
        inputs[k].setAttribute('value', inputs[k].value)
      }
    }

    for (var k2 = 0; k2 &lt; textareas.length; k2++) {
      if (textareas[k2].type == 'textarea') {
        textareas[k2].innerHTML = textareas[k2].value
      }
    }

    for (var k3 = 0; k3 &lt; selects.length; k3++) {
      if (selects[k3].type == 'select-one') {
        var child = selects[k3].children;
        for (var i in child) {
          if (child[i].tagName == 'OPTION') {
            if (child[i].selected == true) {
              child[i].setAttribute('selected', &quot;selected&quot;)
            } else {
              child[i].removeAttribute('selected')
            }
          }
        }
      }
    }
    // 包裹要打印的元素
    // fix: https://github.com/xyl66/vuePlugs_printjs/issues/36
    return this.wrapperRefDom(this.dom).outerHTML;
  },
  // 向父级元素循环，包裹当前需要打印的元素
  // 防止根级别开头的 css 选择器不生效
  wrapperRefDom: function (refDom) {
    let prevDom = null
    let currDom = refDom
    while (currDom &amp;&amp; currDom.tagName.toLowerCase() !== 'body') {
      if (prevDom) {
        let element = currDom.cloneNode(false)
        element.appendChild(prevDom)
        prevDom = element
      } else {
        prevDom = currDom.cloneNode(true)
      }

      currDom = currDom.parentElement
    }

    return currDom.tagName.toLowerCase() === 'body' ? currDom : prevDom
  },

  writeIframe: function (content) {
    var w, doc, iframe = document.createElement('iframe'),
      f = document.body.appendChild(iframe);
    iframe.id = &quot;myIframe&quot;;
    //iframe.style = &quot;position:absolute;width:0;height:0;top:-10px;left:-10px;&quot;;
    iframe.setAttribute('style', 'position:absolute;width:0;height:0;top:-10px;left:-10px;');
    w = f.contentWindow || f.contentDocument;
    doc = f.contentDocument || f.contentWindow.document;
    doc.open();
    doc.write(content);
    doc.close();
    var _this = this
    iframe.onload = function(){
      _this.toPrint(w);
      setTimeout(function () {
        document.body.removeChild(iframe)
      }, 100)
    }
  },

  toPrint: function (frameWindow) {
    try {
      setTimeout(function () {
        frameWindow.focus();
        try {
          if (!frameWindow.document.execCommand('print', false, null)) {
            frameWindow.print();
          }
        } catch (e) {
          frameWindow.print();
        }
        frameWindow.close();
      }, 10);
    } catch (err) {
      console.log('err', err);
    }
  },
  isDOM: (typeof HTMLElement === 'object') ?
    function (obj) {
      return obj instanceof HTMLElement;
    } :
    function (obj) {
      return obj &amp;&amp; typeof obj === 'object' &amp;&amp; obj.nodeType === 1 &amp;&amp; typeof obj.nodeName === 'string';
    }
};
const MyPlugin = {}
MyPlugin.install = function (Vue, options) {
  // 4. 添加实例方法
  Vue.prototype.$print = Print
}
export default MyPlugin

</code></pre>
<h3 id="2-mainjs中进行引入">2、main.js中进行引入</h3>
<pre><code>import Print from &quot;@/utils/print.js&quot; // 打印
Vue.use(Print)
</code></pre>
<h3 id="3-使用">3、使用</h3>
<pre><code>&lt;div class=&quot;printContainer clearfix&quot; ref=&quot;samplePdf&quot;&gt;
    &lt;div class=&quot;prinfLeft fl&quot;&gt;
      &lt;img :src=&quot;qrcode&quot; alt=&quot;codePic&quot; /&gt;
      &lt;p&gt;扫码查询样品信息&lt;/p&gt;
    &lt;/div&gt;
    &lt;ul class=&quot;printRight fr&quot;&gt;
      &lt;li&gt;&lt;label&gt;样品&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ID:&lt;/label&gt;&lt;span&gt;{{ TaskNum  }}&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;&lt;label&gt;任务名称:&lt;/label&gt;&lt;span&gt;{{ TaskName  }}&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;&lt;label&gt;检测项目:&lt;/label&gt;&lt;span&gt;{{ DetectionTaskItems }}&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;&lt;label&gt;委托人:&lt;/label&gt;&lt;span&gt;{{ SamplePerson }}&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;&lt;label&gt;所属部门:&lt;/label&gt;&lt;span&gt;{{ CreatedDepartmentName }}&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;&lt;label&gt;样品所有人:&lt;/label&gt;&lt;span&gt;{{ RelationUserName }}&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;&lt;label&gt;平行样品:&lt;/label&gt;&lt;span&gt;{{ SampleNum }}&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;&lt;label&gt;样品原号:&lt;/label&gt;&lt;span&gt;{{ repsampleSign }}&lt;/span&gt;&lt;/li&gt;
      &lt;li&gt;&lt;label&gt;送样日期:&lt;/label&gt;&lt;span&gt;{{ createTime }}&lt;/span&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
  &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer no-print&quot;&gt;
      &lt;el-button type=&quot;info&quot; @click=&quot;closeSamplePdf&quot;&gt;返回&lt;/el-button&gt;
      &lt;el-button type=&quot;info&quot; @click=&quot;samplePrint&quot;&gt;保存PDF&lt;/el-button&gt;
      &lt;el-button type=&quot;info&quot; @click=&quot;samplePrint&quot;&gt;打印&lt;/el-button&gt;
  &lt;/span&gt;
 
 
 methods: {
 	// 打印
    samplePrint() {
        this.$print(this.$refs.samplePdf)
    },
 }
 
</code></pre>
<h3 id="4-备注">4、备注</h3>
<p>对于不想打印的内容添加 .no-print 类</p>

                </div>
                <div class="clear"></div>
              </section>
            </article>
            <div class="clear"></div>

            <section class="related section">
              
              <article class="prev grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://hviker.github.io/post-images/vue-fen-ye.jpg');"></div>
                 <a href="https://hviker.github.io/post/vue-fen-ye/" class="full-link"></a>
                 <div class="info">
                  <time datetime="2020-08-21">2020-08-21</time>
                  <h4 class="title white no-margin">vue 分页</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://hviker.github.io/media/images/left-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              
              
              <article class="next grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://hviker.github.io/post-images/axios-qing-qiu-tu-pian-liu.jpg');"></div>
                 <a href="https://hviker.github.io/post/axios-qing-qiu-tu-pian-liu/" class="full-link"></a>
                 <div class="info">
                  <time datetime="2020-08-17">2020-08-17</time>
                  <h4 class="title white no-margin">Axios请求图片流</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://hviker.github.io/media/images/right-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              

                <div class="clear"></div>
            </section>

              <div class="clear"></div>
              
            
              <div id="comments" class="bg-white hosted ">
                
                  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>
<div class="clear"></div>

<script>
  var gitalk = new Gitalk({
    clientID: 'f68ae8f71a2215243ce9',
    clientSecret: '4425adb0890c433816522b291391cf173556ee5f',
    repo: 'hviker.github.io',
    owner: 'hviker',
    admin: ['hviker'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')
</script>

                
                
              </div>
            

            </div>
          </div>
      </main>

          <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">最新文章</h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://hviker.github.io/post/dm8-an-zhuang-xie-zai-chuang-jian-shi-li-qi-dong-fu-wu-ke-shi-hua-gong-ju-lian-jie/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('/media/images/gridea.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-07-26">2021-07-26</time>
                      <h4 class="title usmall">
                        <a href="https://hviker.github.io/post/dm8-an-zhuang-xie-zai-chuang-jian-shi-li-qi-dong-fu-wu-ke-shi-hua-gong-ju-lian-jie/">dm8安装、卸载、创建实例、启动服务、可视化工具连接</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://hviker.github.io/post/echarts-tu-tian-jia-fen-ge-xian/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('/media/images/gridea.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-07-14">2021-07-14</time>
                      <h4 class="title usmall">
                        <a href="https://hviker.github.io/post/echarts-tu-tian-jia-fen-ge-xian/">echarts图添加分割线</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://hviker.github.io/post/zhuo-mian-tong-zhi-notification-api/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('/media/images/gridea.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-07-08">2021-07-08</time>
                      <h4 class="title usmall">
                        <a href="https://hviker.github.io/post/zhuo-mian-tong-zhi-notification-api/">桌面通知 Notification API</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">标签云</h4>
                  <div class="tagcloud">
                    
                      <a href="https://hviker.github.io/tag/zSVOYgve1/" class="ctag ctag-0 ctag-zSVOYgve1" aria-label="">软件安装及使用</a>
                    
                      <a href="https://hviker.github.io/tag/z2AsGhmT2/" class="ctag ctag-1 ctag-z2AsGhmT2" aria-label="">echarts</a>
                    
                      <a href="https://hviker.github.io/tag/qian-duan/" class="ctag ctag-2 ctag-qian-duan" aria-label="">前端</a>
                    
                      <a href="https://hviker.github.io/tag/WtDIIxiyz/" class="ctag ctag-3 ctag-WtDIIxiyz" aria-label="">layui</a>
                    
                      <a href="https://hviker.github.io/tag/VFjcKMN5n/" class="ctag ctag-4 ctag-VFjcKMN5n" aria-label="">webpack</a>
                    
                      <a href="https://hviker.github.io/tag/L-6nzPhRV/" class="ctag ctag-5 ctag-L-6nzPhRV" aria-label="">Vue2.0</a>
                    
                      <a href="https://hviker.github.io/tag/GXfbDeMZV/" class="ctag ctag-6 ctag-GXfbDeMZV" aria-label="">vue</a>
                    
                      <a href="https://hviker.github.io/tag/j1qkahhB3/" class="ctag ctag-7 ctag-j1qkahhB3" aria-label="">CSS</a>
                    
                      <a href="https://hviker.github.io/tag/LDwpAxA3l/" class="ctag ctag-8 ctag-LDwpAxA3l" aria-label="">培训</a>
                    
                      <a href="https://hviker.github.io/tag/OK2iMRMG6/" class="ctag ctag-9 ctag-OK2iMRMG6" aria-label="">JS</a>
                    
                      <a href="https://hviker.github.io/tag/1ZVkdNUAB/" class="ctag ctag-10 ctag-1ZVkdNUAB" aria-label="">前端工程化</a>
                    
                      <a href="https://hviker.github.io/tag/sPs52aHLl/" class="ctag ctag-11 ctag-sPs52aHLl" aria-label="">源码学习</a>
                    
                      <a href="https://hviker.github.io/tag/Ugt1CeixF/" class="ctag ctag-12 ctag-Ugt1CeixF" aria-label="">elementUI2.0</a>
                    
                      <a href="https://hviker.github.io/tag/WeNhJHfo1/" class="ctag ctag-13 ctag-WeNhJHfo1" aria-label="">前端组件</a>
                    
                      <a href="https://hviker.github.io/tag/nHH9c42oQ/" class="ctag ctag-14 ctag-nHH9c42oQ" aria-label="">解决方法</a>
                    
                      <a href="https://hviker.github.io/tag/DIQF7868Q/" class="ctag ctag-15 ctag-DIQF7868Q" aria-label="">服务器</a>
                    
                      <a href="https://hviker.github.io/tag/uWbJmEwft/" class="ctag ctag-16 ctag-uWbJmEwft" aria-label="">D3</a>
                    
                      <a href="https://hviker.github.io/tag/37uX5bo02/" class="ctag ctag-17 ctag-37uX5bo02" aria-label="">Git</a>
                    
                      <a href="https://hviker.github.io/tag/rqmNkvREA/" class="ctag ctag-18 ctag-rqmNkvREA" aria-label="">后端</a>
                    
                      <a href="https://hviker.github.io/tag/idNHj5-gf/" class="ctag ctag-19 ctag-idNHj5-gf" aria-label="">Gridea</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">关于我</h4>
                  <div class="avatar">
                    <a href="" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(https://hviker.github.io/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="">hviker</a></h4>
                    <p class="founder">心游于艺，道不远人。</p>
                    <div class="social">
                      
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </div> 
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <div class="logo">
          <a href="https://hviker.github.io"><img src="/media/images/custom-footerLogo.png" alt=""></a>
        </div>
        <p class="published border-effect">
          ©2019 共 70 篇文章
          <br/>
          Theme <a href="https://gridea.dev/" target="_blank">「breek」</a> Powered by <a href="https://gridea.dev/" target="_blank">「Gridea」</a>
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>
    </footer>
    
    <div class="clear"></div>

        

      
    <script src="https://hviker.github.io/media/js/functions-post.js"></script>

    </div>
    <!-- end: #wrapper -->
  </body>
</html>
